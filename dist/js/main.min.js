function changeActiveBar(){let e=this.dataset.bar,t=document.querySelectorAll(".bar-description");document.querySelector(".bar-descriptions .active").classList.remove("active"),t[e-1].classList.add("active")}function loop(e){let t=document.querySelectorAll(".project"),r=document.querySelector(".projects-container"),l=document.querySelector(".projects");e?(carousel-=l.clientWidth/t.length,arrow_left.style.visibility="visible",Math.abs(carousel)+r.clientWidth>l.clientWidth&&(carousel=0,arrow_left.style.visibility="hidden"),l.style.transform=`translateX(${carousel}px)`):(carousel+=l.clientWidth/t.length,l.style.transform=`translateX(${carousel}px)`,carousel<=0&&(arrow_left.style.visibility="hidden"))}function initMap(){let e=new google.maps.StyledMapType([{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#181818"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}]),t=new google.maps.Map(document.querySelector(".map"),{center:{lat:50.081596725673236,lng:19.949696344901934},zoom:15,disableDefaultUI:!0});new google.maps.Marker({position:{lat:50.081596725673236,lng:19.949696344901934},map:t,animation:google.maps.Animation.DROP,icon:{url:"../assets/img/marker.png",scaledSize:new google.maps.Size(60,72)}});t.mapTypes.set("styled_map",e),t.setMapTypeId("styled_map")}function validate(e,t,r){let l=!0;return""===e.value?(e.parentElement.style.borderColor="#F00",l=!1):e.parentElement.style.removeProperty("border-color"),validateMail(t)?(t.parentElement.style.borderColor="#F00",l=!1):t.parentElement.style.removeProperty("border-color"),""===r.value?(r.parentElement.style.borderColor="#F00",l=!1):r.parentElement.style.removeProperty("border-color"),l}function validateMail(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.value)}function sendMessage(e,t,r,l,o){validate(e,r,o)&&(Email.send({Host:"smtp.elasticemail.com",Username:"dawid.piech243@gmail.com",Password:"0a835045-5d7a-418a-8739-11018b7cfee1",To:"dawid@piech.it",From:"portfolio@piech.it",Subject:`Name: ${e.value}, Firm: ${t.value}`,Body:`Mail: ${r.value},\n            Phone: ${l.value},\n\n            Message: ${o.value}\n            `}).then(e=>console.log(e)),e.parentElement.style.removeProperty("border-color"),r.parentElement.style.removeProperty("border-color"),o.parentElement.style.removeProperty("border-color"),e.value="",t.value="",r.value="",l.value="",o.value="")}function checkImagesLoaded(e,t){let r=e.length;for(let l=0;l<e.length;l++)e[l].complete?r--:e[l].addEventListener("load",()=>{0===--r&&allImagesLoaded(t)});0===r&&allImagesLoaded(t)}function allImagesLoaded(e){document.querySelector("body").classList.remove("load"),e.classList.add("isLoaded")}function paralax(){document.querySelector(".section-header").style.backgroundPositionY=window.pageYOffset/4+"px"}let hamburger=document.querySelector(".hamburger"),menu_fields=document.querySelectorAll(".menu-form-field input"),mail_area=document.querySelectorAll(".menu-form-field textarea"),black_area=document.querySelector(".menu-back"),bars=document.querySelectorAll(".bar"),arrow_left=document.querySelector(".arrow-left"),arrow_right=document.querySelector(".arrow-right"),carousel=0,send_menu=document.querySelector(".menu-form .send"),send_contact=document.querySelector(".section-form .send"),preloader=document.querySelector(".preloader"),img=document.querySelectorAll("img");document.addEventListener("DOMContentLoaded",()=>{hamburger.addEventListener("click",()=>{document.querySelector("header").classList.toggle("open")}),menu_fields.forEach(e=>{e.addEventListener("focusin",()=>{e.parentElement.classList.add("focus")})}),mail_area.forEach(e=>{e.addEventListener("focusin",()=>{e.parentElement.classList.add("focus-area")})}),menu_fields.forEach(e=>{e.addEventListener("focusout",()=>{""===e.value&&e.parentElement.classList.remove("focus")})}),mail_area.forEach(e=>{e.addEventListener("focusout",()=>{""===e.value&&e.parentElement.classList.remove("focus-area")})}),black_area.addEventListener("click",()=>{document.querySelector("header").classList.remove("open")});for(let e=0;e<bars.length;e++)bars[e].addEventListener("click",changeActiveBar);null!=arrow_left&null!=arrow_right&&(arrow_left.addEventListener("click",()=>{loop(!1)}),arrow_right.addEventListener("click",()=>{loop(!0)})),null!=send_contact&&send_contact.addEventListener("click",function(){sendMessage(...[document.querySelector(".section-form input[name='name']"),document.querySelector(".section-form input[name='company_name']"),document.querySelector(".section-form input[name='e-mail']"),document.querySelector(".section-form input[name='telephone']"),document.querySelector(".section-form textarea[name='message']")])}),null!=send_menu&&send_menu.addEventListener("click",function(){sendMessage(...[document.querySelector(".menu-form input[name='name']"),document.querySelector(".menu-form input[name='company_name']"),document.querySelector(".menu-form input[name='e-mail']"),document.querySelector(".menu-form input[name='telephone']"),document.querySelector(".menu-form textarea[name='message']")])}),setTimeout(()=>{checkImagesLoaded(img,preloader)},500),window.addEventListener("scroll",()=>{null!=document.querySelector(".section-header")&&paralax()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bmN0aW9ucy5qcyIsInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJjaGFuZ2VBY3RpdmVCYXIiLCJhIiwidGhpcyIsImRhdGFzZXQiLCJiYXIiLCJiYXJfZGVzYyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJsb29wIiwic2xpZGVzIiwic2xpZGVyIiwicHJvamVjdHNfY29udGFpbmVyIiwiY2Fyb3VzZWwiLCJjbGllbnRXaWR0aCIsImxlbmd0aCIsImFycm93X2xlZnQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJNYXRoIiwiYWJzIiwidHJhbnNmb3JtIiwiaW5pdE1hcCIsInN0eWxlZE1hcFR5cGUiLCJnb29nbGUiLCJtYXBzIiwiU3R5bGVkTWFwVHlwZSIsImVsZW1lbnRUeXBlIiwic3R5bGVycyIsImNvbG9yIiwiZmVhdHVyZVR5cGUiLCJtYXAiLCJNYXAiLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJ6b29tIiwiZGlzYWJsZURlZmF1bHRVSSIsIk1hcmtlciIsInBvc2l0aW9uIiwiYW5pbWF0aW9uIiwiQW5pbWF0aW9uIiwiRFJPUCIsImljb24iLCJ1cmwiLCJzY2FsZWRTaXplIiwiU2l6ZSIsIm1hcFR5cGVzIiwic2V0Iiwic2V0TWFwVHlwZUlkIiwidmFsaWRhdGUiLCJuYW1lIiwibWFpbCIsIm1lc3NhZ2UiLCJjb250cm9sbCIsInZhbHVlIiwicGFyZW50RWxlbWVudCIsImJvcmRlckNvbG9yIiwicmVtb3ZlUHJvcGVydHkiLCJ2YWxpZGF0ZU1haWwiLCJ0ZXN0Iiwic2VuZE1lc3NhZ2UiLCJmaXJtIiwicGhvbmUiLCJFbWFpbCIsInNlbmQiLCJIb3N0IiwiVXNlcm5hbWUiLCJQYXNzd29yZCIsIlRvIiwiRnJvbSIsIlN1YmplY3QiLCJCb2R5IiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJjaGVja0ltYWdlc0xvYWRlZCIsImltYWdlc0FycmF5IiwicHJlbG9hZGVySGFuZGxlIiwibG9hZGVkIiwiaSIsImNvbXBsZXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFsbEltYWdlc0xvYWRlZCIsInByZWxvYWRlciIsInBhcmFsYXgiLCJiYWNrZ3JvdW5kUG9zaXRpb25ZIiwid2luZG93IiwicGFnZVlPZmZzZXQiLCJoYW1idXJnZXIiLCJtZW51X2ZpZWxkcyIsIm1haWxfYXJlYSIsImJsYWNrX2FyZWEiLCJiYXJzIiwiYXJyb3dfcmlnaHQiLCJzZW5kX21lbnUiLCJzZW5kX2NvbnRhY3QiLCJpbWciLCJ0b2dnbGUiLCJmb3JFYWNoIiwic2V0VGltZW91dCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBQUEsa0JBQ0EsSUFBQUMsRUFBQUMsS0FBQUMsUUFBQUMsSUFDQUMsRUFBQUMsU0FBQUMsaUJBQUEsb0JBQ0FELFNBQUFFLGNBQUEsNkJBRUFDLFVBQUFDLE9BQUEsVUFDQUwsRUFBQUosRUFBQSxHQUFBUSxVQUFBRSxJQUFBLFVBR0EsU0FBQUMsS0FBQVgsR0FFQSxJQUFBWSxFQUFBUCxTQUFBQyxpQkFBQSxZQUNBTyxFQUFBUixTQUFBRSxjQUFBLHVCQUNBTyxFQUFBVCxTQUFBRSxjQUFBLGFBRUFQLEdBQ0FlLFVBQUFELEVBQUFFLFlBQUFKLEVBQUFLLE9BQ0FDLFdBQUFDLE1BQUFDLFdBQUEsVUFDQUMsS0FBQUMsSUFBQVAsVUFBQUYsRUFBQUcsWUFBQUYsRUFBQUUsY0FDQUQsU0FBQSxFQUNBRyxXQUFBQyxNQUFBQyxXQUFBLFVBRUFOLEVBQUFLLE1BQUFJLHdCQUFBUixnQkFHQUEsVUFBQUQsRUFBQUUsWUFBQUosRUFBQUssT0FDQUgsRUFBQUssTUFBQUksd0JBQUFSLGNBQ0FBLFVBQUEsSUFDQUcsV0FBQUMsTUFBQUMsV0FBQSxXQUlBLFNBQUFJLFVBQ0EsSUFBQUMsRUFBQSxJQUFBQyxPQUFBQyxLQUFBQyxjQUNBLENBQ0EsQ0FDQUMsWUFBQSxXQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FGLFlBQUEsY0FDQUMsUUFBQSxDQUNBLENBQ0FWLFdBQUEs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QSxNQUFBMEYsV0FFQUEsVUFBQWIsaUJBQUEsUUFBQSxXQVNBckIsZUFSQSxDQUNBMUQsU0FBQUUsY0FBQSxpQ0FDQUYsU0FBQUUsY0FBQSx5Q0FDQUYsU0FBQUUsY0FBQSxtQ0FDQUYsU0FBQUUsY0FBQSxzQ0FDQUYsU0FBQUUsY0FBQSwyQ0FPQStGLFdBQUEsS0FDQXhCLGtCQUFBcUIsSUFBQWIsWUFDQSxLQUdBRyxPQUFBTCxpQkFBQSxTQUFBLEtBQ0EsTUFBQS9FLFNBQUFFLGNBQUEsb0JBQ0FnRiIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGNoYW5nZUFjdGl2ZUJhcigpIHtcclxuICAgIGxldCBhID0gdGhpcy5kYXRhc2V0LmJhcixcclxuICAgICAgICBiYXJfZGVzYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYmFyLWRlc2NyaXB0aW9uXCIpLFxyXG4gICAgICAgIGJhcl9hY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhci1kZXNjcmlwdGlvbnMgLmFjdGl2ZVwiKVxyXG5cclxuICAgIGJhcl9hY3RpdmUuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxyXG4gICAgYmFyX2Rlc2NbYSAtIDFdLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcclxufVxyXG5cclxuZnVuY3Rpb24gbG9vcChhKSB7XHJcblxyXG4gICAgbGV0IHNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdFwiKSxcclxuICAgICAgICBzbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzLWNvbnRhaW5lclwiKSxcclxuICAgICAgICBwcm9qZWN0c19jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzXCIpXHJcblxyXG4gICAgaWYgKGEpIHtcclxuICAgICAgICBjYXJvdXNlbCAtPSBwcm9qZWN0c19jb250YWluZXIuY2xpZW50V2lkdGggLyBzbGlkZXMubGVuZ3RoXHJcbiAgICAgICAgYXJyb3dfbGVmdC5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCJcclxuICAgICAgICBpZiAoTWF0aC5hYnMoY2Fyb3VzZWwpICsgc2xpZGVyLmNsaWVudFdpZHRoID4gcHJvamVjdHNfY29udGFpbmVyLmNsaWVudFdpZHRoKSB7XHJcbiAgICAgICAgICAgIGNhcm91c2VsID0gMDtcclxuICAgICAgICAgICAgYXJyb3dfbGVmdC5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIlxyXG4gICAgICAgIH1cclxuICAgICAgICBwcm9qZWN0c19jb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtjYXJvdXNlbH1weClgXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjYXJvdXNlbCArPSBwcm9qZWN0c19jb250YWluZXIuY2xpZW50V2lkdGggLyBzbGlkZXMubGVuZ3RoXHJcbiAgICAgICAgcHJvamVjdHNfY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7Y2Fyb3VzZWx9cHgpYFxyXG4gICAgICAgIGlmIChjYXJvdXNlbCA8PSAwKVxyXG4gICAgICAgICAgICBhcnJvd19sZWZ0LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRNYXAoKSB7XHJcbiAgICBsZXQgc3R5bGVkTWFwVHlwZSA9IG5ldyBnb29nbGUubWFwcy5TdHlsZWRNYXBUeXBlKFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMyMTIxMjFcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy5pY29uXCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMudGV4dC5maWxsXCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiM3NTc1NzVcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LnN0cm9rZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjMjEyMTIxXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJhZG1pbmlzdHJhdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiM3NTc1NzVcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcImFkbWluaXN0cmF0aXZlLmNvdW50cnlcIixcclxuICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMudGV4dC5maWxsXCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiM5ZTllOWVcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcImFkbWluaXN0cmF0aXZlLmxhbmRfcGFyY2VsXCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJhZG1pbmlzdHJhdGl2ZS5sb2NhbGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiI2JkYmRiZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicG9pXCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjNzU3NTc1XCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJwb2kucGFya1wiLFxyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMxODE4MThcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInBvaS5wYXJrXCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjNjE2MTYxXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJwb2kucGFya1wiLFxyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LnN0cm9rZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjMWIxYjFiXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkXCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnkuZmlsbFwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjMmMyYzJjXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkXCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjOGE4YThhXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmFydGVyaWFsXCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzM3MzczN1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5oaWdod2F5XCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzNjM2MzY1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5oaWdod2F5LmNvbnRyb2xsZWRfYWNjZXNzXCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzRlNGU0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5sb2NhbFwiLFxyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzYxNjE2MVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwidHJhbnNpdFwiLFxyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzc1NzU3NVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwid2F0ZXJcIixcclxuICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeVwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjMDAwMDAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJ3YXRlclwiLFxyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzNkM2QzZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgKVxyXG5cclxuICAgIGxldCBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYXAnKSwge1xyXG4gICAgICAgIGNlbnRlcjogeyBsYXQ6IDUwLjA4MTU5NjcyNTY3MzIzNiwgbG5nOiAxOS45NDk2OTYzNDQ5MDE5MzQgfSxcclxuICAgICAgICB6b29tOiAxNSxcclxuICAgICAgICBkaXNhYmxlRGVmYXVsdFVJOiB0cnVlXHJcbiAgICB9KSxcclxuXHJcbiAgICAgICAgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiB7IGxhdDogNTAuMDgxNTk2NzI1NjczMjM2LCBsbmc6IDE5Ljk0OTY5NjM0NDkwMTkzNCB9LFxyXG4gICAgICAgICAgICBtYXA6IG1hcCxcclxuICAgICAgICAgICAgYW5pbWF0aW9uOiBnb29nbGUubWFwcy5BbmltYXRpb24uRFJPUCxcclxuICAgICAgICAgICAgaWNvbjoge1xyXG4gICAgICAgICAgICAgICAgdXJsOiBcIi4uL2Fzc2V0cy9pbWcvbWFya2VyLnBuZ1wiLFxyXG4gICAgICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoNjAsIDcyKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICBtYXAubWFwVHlwZXMuc2V0KCdzdHlsZWRfbWFwJywgc3R5bGVkTWFwVHlwZSk7XHJcbiAgICBtYXAuc2V0TWFwVHlwZUlkKCdzdHlsZWRfbWFwJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlKG5hbWUsIG1haWwsIG1lc3NhZ2UpIHtcclxuICAgIGxldCBjb250cm9sbCA9IHRydWVcclxuICAgIGlmIChuYW1lLnZhbHVlID09PSBcIlwiKSB7XHJcbiAgICAgICAgbmFtZS5wYXJlbnRFbGVtZW50LnN0eWxlLmJvcmRlckNvbG9yID0gXCIjRjAwXCJcclxuICAgICAgICBjb250cm9sbCA9IGZhbHNlXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBuYW1lLnBhcmVudEVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJib3JkZXItY29sb3JcIilcclxuICAgIH1cclxuXHJcblxyXG4gICAgaWYgKHZhbGlkYXRlTWFpbChtYWlsKSkge1xyXG4gICAgICAgIG1haWwucGFyZW50RWxlbWVudC5zdHlsZS5ib3JkZXJDb2xvciA9IFwiI0YwMFwiXHJcbiAgICAgICAgY29udHJvbGwgPSBmYWxzZVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgbWFpbC5wYXJlbnRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiYm9yZGVyLWNvbG9yXCIpXHJcbiAgICB9XHJcbiAgICBpZiAobWVzc2FnZS52YWx1ZSA9PT0gXCJcIikge1xyXG4gICAgICAgIG1lc3NhZ2UucGFyZW50RWxlbWVudC5zdHlsZS5ib3JkZXJDb2xvciA9IFwiI0YwMFwiXHJcbiAgICAgICAgY29udHJvbGwgPSBmYWxzZVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgbWVzc2FnZS5wYXJlbnRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiYm9yZGVyLWNvbG9yXCIpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNvbnRyb2xsXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTWFpbChhKSB7XHJcbiAgICBsZXQgY29udHJvbGwgPSAoL15cXHcrKFtcXC4tXT9cXHcrKSpAXFx3KyhbXFwuLV0/XFx3KykqKFxcLlxcd3syLDN9KSskLy50ZXN0KGEudmFsdWUpKSA/IGZhbHNlIDogdHJ1ZVxyXG4gICAgcmV0dXJuIGNvbnRyb2xsXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlbmRNZXNzYWdlKG5hbWUsIGZpcm0sIG1haWwsIHBob25lLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAodmFsaWRhdGUobmFtZSwgbWFpbCwgbWVzc2FnZSkpIHtcclxuICAgICAgICBFbWFpbC5zZW5kKHtcclxuICAgICAgICAgICAgSG9zdDogXCJzbXRwLmVsYXN0aWNlbWFpbC5jb21cIixcclxuICAgICAgICAgICAgVXNlcm5hbWU6IFwiZGF3aWQucGllY2gyNDNAZ21haWwuY29tXCIsXHJcbiAgICAgICAgICAgIFBhc3N3b3JkOiBcIjBhODM1MDQ1LTVkN2EtNDE4YS04NzM5LTExMDE4YjdjZmVlMVwiLFxyXG4gICAgICAgICAgICBUbzogJ2Rhd2lkQHBpZWNoLml0JyxcclxuICAgICAgICAgICAgRnJvbTogXCJwb3J0Zm9saW9AcGllY2guaXRcIixcclxuICAgICAgICAgICAgU3ViamVjdDogYE5hbWU6ICR7bmFtZS52YWx1ZX0sIEZpcm06ICR7ZmlybS52YWx1ZX1gLFxyXG4gICAgICAgICAgICBCb2R5OiBgTWFpbDogJHttYWlsLnZhbHVlfSxcclxuICAgICAgICAgICAgUGhvbmU6ICR7cGhvbmUudmFsdWV9LFxyXG5cclxuICAgICAgICAgICAgTWVzc2FnZTogJHttZXNzYWdlLnZhbHVlfVxyXG4gICAgICAgICAgICBgLFxyXG4gICAgICAgIH0pLnRoZW4oXHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPT4gY29uc29sZS5sb2cobWVzc2FnZSlcclxuICAgICAgICApXHJcblxyXG5cclxuICAgICAgICBuYW1lLnBhcmVudEVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJib3JkZXItY29sb3JcIilcclxuICAgICAgICBtYWlsLnBhcmVudEVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJib3JkZXItY29sb3JcIilcclxuICAgICAgICBtZXNzYWdlLnBhcmVudEVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJib3JkZXItY29sb3JcIilcclxuXHJcbiAgICAgICAgbmFtZS52YWx1ZSA9IFwiXCJcclxuICAgICAgICBmaXJtLnZhbHVlID0gXCJcIlxyXG4gICAgICAgIG1haWwudmFsdWUgPSBcIlwiXHJcbiAgICAgICAgcGhvbmUudmFsdWUgPSBcIlwiXHJcbiAgICAgICAgbWVzc2FnZS52YWx1ZSA9IFwiXCJcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tJbWFnZXNMb2FkZWQoaW1hZ2VzQXJyYXksIHByZWxvYWRlckhhbmRsZSkge1xyXG4gICAgbGV0IGxvYWRlZCA9IGltYWdlc0FycmF5Lmxlbmd0aFxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VzQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoaW1hZ2VzQXJyYXlbaV0uY29tcGxldGUpIHtcclxuICAgICAgICAgICAgbG9hZGVkLS1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGltYWdlc0FycmF5W2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxvYWRlZC0tXHJcbiAgICAgICAgICAgICAgICBpZiAobG9hZGVkID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsSW1hZ2VzTG9hZGVkKHByZWxvYWRlckhhbmRsZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGxvYWRlZCA9PT0gMCkge1xyXG4gICAgICAgIGFsbEltYWdlc0xvYWRlZChwcmVsb2FkZXJIYW5kbGUpXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFsbEltYWdlc0xvYWRlZChwcmVsb2FkZXIpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJsb2FkXCIpXHJcbiAgICBwcmVsb2FkZXIuY2xhc3NMaXN0LmFkZChcImlzTG9hZGVkXCIpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcmFsYXgoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWN0aW9uLWhlYWRlclwiKS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb25ZID0gd2luZG93LnBhZ2VZT2Zmc2V0IC8gNCArIFwicHhcIlxyXG59IiwibGV0IGhhbWJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGFtYnVyZ2VyXCIpLFxyXG4gICAgbWVudV9maWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1lbnUtZm9ybS1maWVsZCBpbnB1dFwiKSxcclxuICAgIG1haWxfYXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWVudS1mb3JtLWZpZWxkIHRleHRhcmVhXCIpLFxyXG4gICAgYmxhY2tfYXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1iYWNrXCIpLFxyXG4gICAgYmFycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYmFyXCIpLFxyXG4gICAgYXJyb3dfbGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXJyb3ctbGVmdFwiKSxcclxuICAgIGFycm93X3JpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hcnJvdy1yaWdodFwiKSxcclxuICAgIGNhcm91c2VsID0gMCxcclxuICAgIHNlbmRfbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1mb3JtIC5zZW5kXCIpLFxyXG4gICAgc2VuZF9jb250YWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWN0aW9uLWZvcm0gLnNlbmRcIiksXHJcbiAgICBwcmVsb2FkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByZWxvYWRlclwiKSxcclxuICAgIGltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbWdcIilcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuXHJcblxyXG4gICAgLy9oYW1idXJnZXJcclxuICAgIGhhbWJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoZWFkZXJcIikuY2xhc3NMaXN0LnRvZ2dsZShcIm9wZW5cIilcclxuICAgIH0pXHJcblxyXG4gICAgLy9sYWJlbCBhbmltYXRpb25cclxuICAgIG1lbnVfZmllbGRzLmZvckVhY2goYSA9PiB7XHJcbiAgICAgICAgYS5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGEucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9jdXNcIilcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBtYWlsX2FyZWEuZm9yRWFjaChhID0+IHtcclxuICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsICgpID0+IHtcclxuICAgICAgICAgICAgYS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb2N1cy1hcmVhXCIpXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgbWVudV9maWVsZHMuZm9yRWFjaChhID0+IHtcclxuICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhLnZhbHVlID09PSBcIlwiKVxyXG4gICAgICAgICAgICAgICAgYS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb2N1c1wiKVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuXHJcbiAgICAvL2xhYmVsIGZvcm0gYW5pbWF0aW9uXHJcbiAgICBtYWlsX2FyZWEuZm9yRWFjaChhID0+IHtcclxuICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhLnZhbHVlID09PSBcIlwiKVxyXG4gICAgICAgICAgICAgICAgYS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb2N1cy1hcmVhXCIpXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG5cclxuICAgIC8vY2xvc2UgbWVudVxyXG4gICAgYmxhY2tfYXJlYS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoZWFkZXJcIikuY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5cIilcclxuICAgIH0pXHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgYmFyc1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2hhbmdlQWN0aXZlQmFyKVxyXG4gICAgfVxyXG5cclxuICAgIC8vUHJvamVjdHMgY2Fyb3VzZWxcclxuICAgIGlmIChhcnJvd19sZWZ0ICE9IG51bGwgJiBhcnJvd19yaWdodCAhPSBudWxsKVxyXG4gICAgICAgIChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGFycm93X2xlZnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxvb3AoZmFsc2UpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGFycm93X3JpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsb29wKHRydWUpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSkoKVxyXG5cclxuXHJcbiAgICAvL0NvbnRhY3QgZm9ybSBvbiBDb250YWN0IHBhZ2VcclxuICAgIGlmIChzZW5kX2NvbnRhY3QgIT0gbnVsbClcclxuICAgICAgICAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZW5kX2NvbnRhY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBjb250YWN0X2Zvcm0gPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWN0aW9uLWZvcm0gaW5wdXRbbmFtZT0nbmFtZSddXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VjdGlvbi1mb3JtIGlucHV0W25hbWU9J2NvbXBhbnlfbmFtZSddXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VjdGlvbi1mb3JtIGlucHV0W25hbWU9J2UtbWFpbCddXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VjdGlvbi1mb3JtIGlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VjdGlvbi1mb3JtIHRleHRhcmVhW25hbWU9J21lc3NhZ2UnXVwiKVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2UoLi4uY29udGFjdF9mb3JtKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pKClcclxuXHJcbiAgICAvL0NvbnRhY3QgZm9ybSBpbiBtZW51XHJcbiAgICBpZiAoc2VuZF9tZW51ICE9IG51bGwpXHJcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VuZF9tZW51LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWVudV9mb3JtID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1mb3JtIGlucHV0W25hbWU9J25hbWUnXVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtZm9ybSBpbnB1dFtuYW1lPSdjb21wYW55X25hbWUnXVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtZm9ybSBpbnB1dFtuYW1lPSdlLW1haWwnXVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtZm9ybSBpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtZm9ybSB0ZXh0YXJlYVtuYW1lPSdtZXNzYWdlJ11cIilcclxuICAgICAgICAgICAgICAgIF1cclxuXHJcbiAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZSguLi5tZW51X2Zvcm0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSgpKVxyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGNoZWNrSW1hZ2VzTG9hZGVkKGltZywgcHJlbG9hZGVyKVxyXG4gICAgfSwgNTAwKTtcclxuXHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCkgPT4ge1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlY3Rpb24taGVhZGVyXCIpICE9IG51bGwpXHJcbiAgICAgICAgICAgIHBhcmFsYXgoKVxyXG4gICAgfSlcclxufSkiXX0=
