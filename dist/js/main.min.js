function changeActiveBar(){let e=this.dataset.bar,t=document.querySelectorAll(".bar-description");document.querySelector(".bar-descriptions .active").classList.remove("active"),t[e-1].classList.add("active")}function loop(e){let t=document.querySelectorAll(".project"),r=document.querySelector(".projects-container"),l=document.querySelector(".projects");e?(carousel-=l.clientWidth/t.length,arrow_left.style.visibility="visible",Math.abs(carousel)+r.clientWidth>l.clientWidth&&(carousel=0,arrow_left.style.visibility="hidden"),l.style.transform=`translateX(${carousel}px)`):(carousel+=l.clientWidth/t.length,l.style.transform=`translateX(${carousel}px)`,carousel<=0&&(arrow_left.style.visibility="hidden"))}function initMap(){let e=new google.maps.StyledMapType([{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#181818"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}]),t=new google.maps.Map(document.querySelector(".map"),{center:{lat:50.081596725673236,lng:19.949696344901934},zoom:15,disableDefaultUI:!0});new google.maps.Marker({position:{lat:50.081596725673236,lng:19.949696344901934},map:t,animation:google.maps.Animation.DROP,icon:{url:"../assets/img/marker.png",scaledSize:new google.maps.Size(60,72)}});t.mapTypes.set("styled_map",e),t.setMapTypeId("styled_map")}function validate(e,t,r){let l=!0;return""===e.value?(e.parentElement.style.borderColor="#F00",l=!1):e.parentElement.style.removeProperty("border-color"),validateMail(t)?(t.parentElement.style.borderColor="#F00",l=!1):t.parentElement.style.removeProperty("border-color"),""===r.value?(r.parentElement.style.borderColor="#F00",l=!1):r.parentElement.style.removeProperty("border-color"),l}function validateMail(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.value)}function sendMessage(e,t,r,l,o){validate(e,r,o)&&(Email.send({SecureToken:"d79c6744-5db7-487e-ba33-0ae13c93cd26",To:"dawid@piech.it",From:"portfolio@piech.it",Subject:`Name: ${e}, Firm: ${t}, Phone: ${l}, Message: ${o}`,Body:o}).then(e=>alert(e)),e.parentElement.style.removeProperty("border-color"),r.parentElement.style.removeProperty("border-color"),o.parentElement.style.removeProperty("border-color"))}function checkImagesLoaded(e,t){let r=e.length;for(let l=0;l<e.length;l++)e[l].complete?r--:e[l].addEventListener("load",()=>{0===--r&&allImagesLoaded(t)});0===r&&allImagesLoaded(t)}function allImagesLoaded(e){document.querySelector("body").classList.remove("load"),e.classList.add("isLoaded")}function paralax(){document.querySelector(".section-header").style.backgroundPositionY=window.pageYOffset/4+"px"}let hamburger=document.querySelector(".hamburger"),menu_fields=document.querySelectorAll(".menu-form-field input"),mail_area=document.querySelectorAll(".menu-form-field textarea"),black_area=document.querySelector(".menu-back"),bars=document.querySelectorAll(".bar"),arrow_left=document.querySelector(".arrow-left"),arrow_right=document.querySelector(".arrow-right"),carousel=0,send_menu=document.querySelector(".menu-form .send"),send_contact=document.querySelector(".section-form .send"),preloader=document.querySelector(".preloader"),img=document.querySelectorAll("img");document.addEventListener("DOMContentLoaded",()=>{hamburger.addEventListener("click",()=>{document.querySelector("header").classList.toggle("open")}),menu_fields.forEach(e=>{e.addEventListener("focusin",()=>{e.parentElement.classList.add("focus")})}),mail_area.forEach(e=>{e.addEventListener("focusin",()=>{e.parentElement.classList.add("focus-area")})}),menu_fields.forEach(e=>{e.addEventListener("focusout",()=>{""===e.value&&e.parentElement.classList.remove("focus")})}),mail_area.forEach(e=>{e.addEventListener("focusout",()=>{""===e.value&&e.parentElement.classList.remove("focus-area")})}),black_area.addEventListener("click",()=>{document.querySelector("header").classList.remove("open")});for(let e=0;e<bars.length;e++)bars[e].addEventListener("click",changeActiveBar);try{arrow_left.addEventListener("click",()=>{loop(!1)}),arrow_right.addEventListener("click",()=>{loop(!0)})}catch{}try{send_contact.addEventListener("click",function(){sendMessage(...[document.querySelector(".section-form input[name='name']"),document.querySelector(".section-form input[name='company_name']"),document.querySelector(".section-form input[name='e-mail']"),document.querySelector(".section-form input[name='telephone']"),document.querySelector(".section-form textarea[name='message']")])}),send_menu.addEventListener("click",function(){sendMessage(...[document.querySelector(".menu-form input[name='name']"),document.querySelector(".menu-form input[name='company_name']"),document.querySelector(".menu-form input[name='e-mail']"),document.querySelector(".menu-form input[name='telephone']"),document.querySelector(".menu-form textarea[name='message']")])})}catch{}setTimeout(()=>{checkImagesLoaded(img,preloader)},500),window.addEventListener("scroll",paralax)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bmN0aW9ucy5qcyIsInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJjaGFuZ2VBY3RpdmVCYXIiLCJhIiwidGhpcyIsImRhdGFzZXQiLCJiYXIiLCJiYXJfZGVzYyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJsb29wIiwic2xpZGVzIiwic2xpZGVyIiwicHJvamVjdHNfY29udGFpbmVyIiwiY2Fyb3VzZWwiLCJjbGllbnRXaWR0aCIsImxlbmd0aCIsImFycm93X2xlZnQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJNYXRoIiwiYWJzIiwidHJhbnNmb3JtIiwiaW5pdE1hcCIsInN0eWxlZE1hcFR5cGUiLCJnb29nbGUiLCJtYXBzIiwiU3R5bGVkTWFwVHlwZSIsImVsZW1lbnRUeXBlIiwic3R5bGVycyIsImNvbG9yIiwiZmVhdHVyZVR5cGUiLCJtYXAiLCJNYXAiLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJ6b29tIiwiZGlzYWJsZURlZmF1bHRVSSIsIk1hcmtlciIsInBvc2l0aW9uIiwiYW5pbWF0aW9uIiwiQW5pbWF0aW9uIiwiRFJPUCIsImljb24iLCJ1cmwiLCJzY2FsZWRTaXplIiwiU2l6ZSIsIm1hcFR5cGVzIiwic2V0Iiwic2V0TWFwVHlwZUlkIiwidmFsaWRhdGUiLCJuYW1lIiwibWFpbCIsIm1lc3NhZ2UiLCJjb250cm9sbCIsInZhbHVlIiwicGFyZW50RWxlbWVudCIsImJvcmRlckNvbG9yIiwicmVtb3ZlUHJvcGVydHkiLCJ2YWxpZGF0ZU1haWwiLCJ0ZXN0Iiwic2VuZE1lc3NhZ2UiLCJmaXJtIiwicGhvbmUiLCJFbWFpbCIsInNlbmQiLCJTZWN1cmVUb2tlbiIsIlRvIiwiRnJvbSIsIlN1YmplY3QiLCJCb2R5IiwidGhlbiIsImFsZXJ0IiwiY2hlY2tJbWFnZXNMb2FkZWQiLCJpbWFnZXNBcnJheSIsInByZWxvYWRlckhhbmRsZSIsImxvYWRlZCIsImkiLCJjb21wbGV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJhbGxJbWFnZXNMb2FkZWQiLCJwcmVsb2FkZXIiLCJwYXJhbGF4IiwiYmFja2dyb3VuZFBvc2l0aW9uWSIsIndpbmRvdyIsInBhZ2VZT2Zmc2V0IiwiaGFtYnVyZ2VyIiwibWVudV9maWVsZHMiLCJtYWlsX2FyZWEiLCJibGFja19hcmVhIiwiYmFycyIsImFycm93X3JpZ2h0Iiwic2VuZF9tZW51Iiwic2VuZF9jb250YWN0IiwiaW1nIiwidG9nZ2xlIiwiZm9yRWFjaCIsInNldFRpbWVvdXQiXSwibWFwcGluZ3MiOiJBQUFBLFNBQUFBLGtCQUNBLElBQUFDLEVBQUFDLEtBQUFDLFFBQUFDLElBQ0FDLEVBQUFDLFNBQUFDLGlCQUFBLG9CQUNBRCxTQUFBRSxjQUFBLDZCQUVBQyxVQUFBQyxPQUFBLFVBQ0FMLEVBQUFKLEVBQUEsR0FBQVEsVUFBQUUsSUFBQSxVQUdBLFNBQUFDLEtBQUFYLEdBRUEsSUFBQVksRUFBQVAsU0FBQUMsaUJBQUEsWUFDQU8sRUFBQVIsU0FBQUUsY0FBQSx1QkFDQU8sRUFBQVQsU0FBQUUsY0FBQSxhQUVBUCxHQUNBZSxVQUFBRCxFQUFBRSxZQUFBSixFQUFBSyxPQUNBQyxXQUFBQyxNQUFBQyxXQUFBLFVBQ0FDLEtBQUFDLElBQUFQLFVBQUFGLEVBQUFHLFlBQUFGLEVBQUFFLGNBQ0FELFNBQUEsRUFDQUcsV0FBQUMsTUFBQUMsV0FBQSxVQUVBTixFQUFBSyxNQUFBSSx3QkFBQVIsZ0JBR0FBLFVBQUFELEVBQUFFLFlBQUFKLEVBQUFLLE9BQ0FILEVBQUFLLE1BQUFJLHdCQUFBUixjQUNBQSxVQUFBLElBQ0FHLFdBQUFDLE1BQUFDLFdBQUEsV0FJQSxTQUFBSSxVQUNBLElBQUFDLEVBQUEsSUFBQUMsT0FBQUMsS0FBQUMsY0FDQSxDQUNBLENBQ0FDLFlBQUEsV0FDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBRixZQUFBLGNBQ0FDLFFBQUEsQ0FDQSxDQUNBVixXQUFBLFNBSUEsQ0FDQVMsWUFBQSxtQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBRixZQUFBLHFCQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FDLFlBQUEsaUJBQ0FILFlBQUEsV0FDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBQyxZQUFBLHlCQUNBSCxZQUFBLG1CQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FDLFlBQUEsNkJBQ0FGLFFBQUEsQ0FDQSxDQUNBVixXQUFBLFNBSUEsQ0FDQVksWUFBQSwwQkFDQUgsWUFBQSxtQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBQyxZQUFBLE1BQ0FILFlBQUEsbUJBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUMsWUFBQSxXQUNBSCxZQUFBLFdBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUMsWUFBQSxXQUNBSCxZQUFBLG1CQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FDLFlBQUEsV0FDQUgsWUFBQSxxQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBQyxZQUFBLE9BQ0FILFlBQUEsZ0JBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUMsWUFBQSxPQUNBSCxZQUFBLG1CQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FDLFlBQUEsZ0JBQ0FILFlBQUEsV0FDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBQyxZQUFBLGVBQ0FILFlBQUEsV0FDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBQyxZQUFBLGlDQUNBSCxZQUFBLFdBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUMsWUFBQSxhQUNBSCxZQUFBLG1CQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FDLFlBQUEsVUFDQUgsWUFBQSxtQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsYUFJQSxDQUNBQyxZQUFBLFFBQ0FI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ZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gY2hhbmdlQWN0aXZlQmFyKCkge1xyXG4gICAgbGV0IGEgPSB0aGlzLmRhdGFzZXQuYmFyLFxyXG4gICAgICAgIGJhcl9kZXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5iYXItZGVzY3JpcHRpb25cIiksXHJcbiAgICAgICAgYmFyX2FjdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmFyLWRlc2NyaXB0aW9ucyAuYWN0aXZlXCIpXHJcblxyXG4gICAgYmFyX2FjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXHJcbiAgICBiYXJfZGVzY1thIC0gMV0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxyXG59XHJcblxyXG5mdW5jdGlvbiBsb29wKGEpIHtcclxuXHJcbiAgICBsZXQgc2xpZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0XCIpLFxyXG4gICAgICAgIHNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHMtY29udGFpbmVyXCIpLFxyXG4gICAgICAgIHByb2plY3RzX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNcIilcclxuXHJcbiAgICBpZiAoYSkge1xyXG4gICAgICAgIGNhcm91c2VsIC09IHByb2plY3RzX2NvbnRhaW5lci5jbGllbnRXaWR0aCAvIHNsaWRlcy5sZW5ndGhcclxuICAgICAgICBhcnJvd19sZWZ0LnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIlxyXG4gICAgICAgIGlmIChNYXRoLmFicyhjYXJvdXNlbCkgKyBzbGlkZXIuY2xpZW50V2lkdGggPiBwcm9qZWN0c19jb250YWluZXIuY2xpZW50V2lkdGgpIHtcclxuICAgICAgICAgICAgY2Fyb3VzZWwgPSAwO1xyXG4gICAgICAgICAgICBhcnJvd19sZWZ0LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb2plY3RzX2NvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke2Nhcm91c2VsfXB4KWBcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNhcm91c2VsICs9IHByb2plY3RzX2NvbnRhaW5lci5jbGllbnRXaWR0aCAvIHNsaWRlcy5sZW5ndGhcclxuICAgICAgICBwcm9qZWN0c19jb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtjYXJvdXNlbH1weClgXHJcbiAgICAgICAgaWYgKGNhcm91c2VsIDw9IDApXHJcbiAgICAgICAgICAgIGFycm93X2xlZnQuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCJcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdE1hcCgpIHtcclxuICAgIGxldCBzdHlsZWRNYXBUeXBlID0gbmV3IGdvb2dsZS5tYXBzLlN0eWxlZE1hcFR5cGUoXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzIxMjEyMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLmljb25cIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInZpc2liaWxpdHlcIjogXCJvZmZcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzc1NzU3NVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuc3Ryb2tlXCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMyMTIxMjFcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcImFkbWluaXN0cmF0aXZlXCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzc1NzU3NVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwiYWRtaW5pc3RyYXRpdmUuY291bnRyeVwiLFxyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzllOWU5ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwiYWRtaW5pc3RyYXRpdmUubGFuZF9wYXJjZWxcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInZpc2liaWxpdHlcIjogXCJvZmZcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcImFkbWluaXN0cmF0aXZlLmxvY2FsaXR5XCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjYmRiZGJkXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJwb2lcIixcclxuICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMudGV4dC5maWxsXCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiM3NTc1NzVcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInBvaS5wYXJrXCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcclxuICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzE4MTgxOFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicG9pLnBhcmtcIixcclxuICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMudGV4dC5maWxsXCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiM2MTYxNjFcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInBvaS5wYXJrXCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuc3Ryb2tlXCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMxYjFiMWJcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWRcIixcclxuICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeS5maWxsXCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMyYzJjMmNcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWRcIixcclxuICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMudGV4dC5maWxsXCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiM4YThhOGFcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWQuYXJ0ZXJpYWxcIixcclxuICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeVwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjMzczNzM3XCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmhpZ2h3YXlcIixcclxuICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeVwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjM2MzYzNjXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmhpZ2h3YXkuY29udHJvbGxlZF9hY2Nlc3NcIixcclxuICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeVwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjNGU0ZTRlXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmxvY2FsXCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjNjE2MTYxXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJ0cmFuc2l0XCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjNzU3NTc1XCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJ3YXRlclwiLFxyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXHJcbiAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMwMDAwMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcIndhdGVyXCIsXHJcbiAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxyXG4gICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjM2QzZDNkXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICApXHJcblxyXG4gICAgbGV0IG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1hcCcpLCB7XHJcbiAgICAgICAgY2VudGVyOiB7IGxhdDogNTAuMDgxNTk2NzI1NjczMjM2LCBsbmc6IDE5Ljk0OTY5NjM0NDkwMTkzNCB9LFxyXG4gICAgICAgIHpvb206IDE1LFxyXG4gICAgICAgIGRpc2FibGVEZWZhdWx0VUk6IHRydWVcclxuICAgIH0pLFxyXG5cclxuICAgICAgICBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IHsgbGF0OiA1MC4wODE1OTY3MjU2NzMyMzYsIGxuZzogMTkuOTQ5Njk2MzQ0OTAxOTM0IH0sXHJcbiAgICAgICAgICAgIG1hcDogbWFwLFxyXG4gICAgICAgICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QLFxyXG4gICAgICAgICAgICBpY29uOiB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFwiLi4vYXNzZXRzL2ltZy9tYXJrZXIucG5nXCIsXHJcbiAgICAgICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSg2MCwgNzIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgIG1hcC5tYXBUeXBlcy5zZXQoJ3N0eWxlZF9tYXAnLCBzdHlsZWRNYXBUeXBlKTtcclxuICAgIG1hcC5zZXRNYXBUeXBlSWQoJ3N0eWxlZF9tYXAnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGUobmFtZSwgbWFpbCwgbWVzc2FnZSkge1xyXG4gICAgbGV0IGNvbnRyb2xsID0gdHJ1ZVxyXG4gICAgaWYgKG5hbWUudmFsdWUgPT09IFwiXCIpIHtcclxuICAgICAgICBuYW1lLnBhcmVudEVsZW1lbnQuc3R5bGUuYm9yZGVyQ29sb3IgPSBcIiNGMDBcIlxyXG4gICAgICAgIGNvbnRyb2xsID0gZmFsc2VcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIG5hbWUucGFyZW50RWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcImJvcmRlci1jb2xvclwiKVxyXG4gICAgfVxyXG4gICAgaWYgKHZhbGlkYXRlTWFpbChtYWlsKSkge1xyXG4gICAgICAgIG1haWwucGFyZW50RWxlbWVudC5zdHlsZS5ib3JkZXJDb2xvciA9IFwiI0YwMFwiXHJcbiAgICAgICAgY29udHJvbGwgPSBmYWxzZVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgbWFpbC5wYXJlbnRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiYm9yZGVyLWNvbG9yXCIpXHJcbiAgICB9XHJcbiAgICBpZiAobWVzc2FnZS52YWx1ZSA9PT0gXCJcIikge1xyXG4gICAgICAgIG1lc3NhZ2UucGFyZW50RWxlbWVudC5zdHlsZS5ib3JkZXJDb2xvciA9IFwiI0YwMFwiXHJcbiAgICAgICAgY29udHJvbGwgPSBmYWxzZVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgbWVzc2FnZS5wYXJlbnRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiYm9yZGVyLWNvbG9yXCIpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNvbnRyb2xsXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTWFpbChhKSB7XHJcbiAgICBsZXQgY29udHJvbGwgPSAoL15cXHcrKFtcXC4tXT9cXHcrKSpAXFx3KyhbXFwuLV0/XFx3KykqKFxcLlxcd3syLDN9KSskLy50ZXN0KGEudmFsdWUpKSA/IGZhbHNlIDogdHJ1ZVxyXG4gICAgcmV0dXJuIGNvbnRyb2xsXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlbmRNZXNzYWdlKG5hbWUsIGZpcm0sIG1haWwsIHBob25lLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAodmFsaWRhdGUobmFtZSwgbWFpbCwgbWVzc2FnZSkpIHtcclxuICAgICAgICBFbWFpbC5zZW5kKHtcclxuICAgICAgICAgICAgU2VjdXJlVG9rZW46IFwiZDc5YzY3NDQtNWRiNy00ODdlLWJhMzMtMGFlMTNjOTNjZDI2XCIsXHJcbiAgICAgICAgICAgIFRvOiAnZGF3aWRAcGllY2guaXQnLFxyXG4gICAgICAgICAgICBGcm9tOiBcInBvcnRmb2xpb0BwaWVjaC5pdFwiLFxyXG4gICAgICAgICAgICBTdWJqZWN0OiBgTmFtZTogJHtuYW1lfSwgRmlybTogJHtmaXJtfSwgUGhvbmU6ICR7cGhvbmV9LCBNZXNzYWdlOiAke21lc3NhZ2V9YCxcclxuICAgICAgICAgICAgQm9keTogbWVzc2FnZVxyXG4gICAgICAgIH0pLnRoZW4oXHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPT4gYWxlcnQobWVzc2FnZSlcclxuICAgICAgICApXHJcbiAgICAgICAgbmFtZS5wYXJlbnRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiYm9yZGVyLWNvbG9yXCIpXHJcbiAgICAgICAgbWFpbC5wYXJlbnRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiYm9yZGVyLWNvbG9yXCIpXHJcbiAgICAgICAgbWVzc2FnZS5wYXJlbnRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiYm9yZGVyLWNvbG9yXCIpXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrSW1hZ2VzTG9hZGVkKGltYWdlc0FycmF5LCBwcmVsb2FkZXJIYW5kbGUpIHtcclxuICAgIGxldCBsb2FkZWQgPSBpbWFnZXNBcnJheS5sZW5ndGhcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlc0FycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGltYWdlc0FycmF5W2ldLmNvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgIGxvYWRlZC0tXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbWFnZXNBcnJheVtpXS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsb2FkZWQtLVxyXG4gICAgICAgICAgICAgICAgaWYgKGxvYWRlZCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsbEltYWdlc0xvYWRlZChwcmVsb2FkZXJIYW5kbGUpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChsb2FkZWQgPT09IDApe1xyXG4gICAgICAgIGFsbEltYWdlc0xvYWRlZChwcmVsb2FkZXJIYW5kbGUpXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFsbEltYWdlc0xvYWRlZChwcmVsb2FkZXIpe1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIikuY2xhc3NMaXN0LnJlbW92ZShcImxvYWRcIilcclxuICAgIHByZWxvYWRlci5jbGFzc0xpc3QuYWRkKFwiaXNMb2FkZWRcIilcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyYWxheCgpe1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWN0aW9uLWhlYWRlclwiKS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb25ZID0gd2luZG93LnBhZ2VZT2Zmc2V0LzQgKyBcInB4XCJcclxufSIsImxldCBoYW1idXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhhbWJ1cmdlclwiKSxcclxuICAgIG1lbnVfZmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tZW51LWZvcm0tZmllbGQgaW5wdXRcIiksXHJcbiAgICBtYWlsX2FyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1lbnUtZm9ybS1maWVsZCB0ZXh0YXJlYVwiKSxcclxuICAgIGJsYWNrX2FyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtYmFja1wiKSxcclxuICAgIGJhcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJhclwiKSxcclxuICAgIGFycm93X2xlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFycm93LWxlZnRcIiksXHJcbiAgICBhcnJvd19yaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXJyb3ctcmlnaHRcIiksXHJcbiAgICBjYXJvdXNlbCA9IDAsXHJcbiAgICBzZW5kX21lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtZm9ybSAuc2VuZFwiKSxcclxuICAgIHNlbmRfY29udGFjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VjdGlvbi1mb3JtIC5zZW5kXCIpLFxyXG4gICAgcHJlbG9hZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcmVsb2FkZXJcIiksXHJcbiAgICBpbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW1nXCIpXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcblxyXG4gICAgXHJcbiAgICAvL2hhbWJ1cmdlclxyXG4gICAgaGFtYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImhlYWRlclwiKS5jbGFzc0xpc3QudG9nZ2xlKFwib3BlblwiKVxyXG4gICAgfSlcclxuXHJcbiAgICAvL2xhYmVsIGFuaW1hdGlvblxyXG4gICAgbWVudV9maWVsZHMuZm9yRWFjaChhID0+IHtcclxuICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsICgpID0+IHtcclxuICAgICAgICAgICAgYS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb2N1c1wiKVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIG1haWxfYXJlYS5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBhLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvY3VzLWFyZWFcIilcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBtZW51X2ZpZWxkcy5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEudmFsdWUgPT09IFwiXCIpXHJcbiAgICAgICAgICAgICAgICBhLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvY3VzXCIpXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG5cclxuICAgIC8vbGFiZWwgZm9ybSBhbmltYXRpb25cclxuICAgIG1haWxfYXJlYS5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEudmFsdWUgPT09IFwiXCIpXHJcbiAgICAgICAgICAgICAgICBhLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvY3VzLWFyZWFcIilcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcblxyXG4gICAgLy9jbG9zZSBtZW51XHJcbiAgICBibGFja19hcmVhLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImhlYWRlclwiKS5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKVxyXG4gICAgfSlcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJhcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBiYXJzW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGFuZ2VBY3RpdmVCYXIpXHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvL1Byb2plY3RzIGNhcm91c2VsXHJcbiAgICAgICAgYXJyb3dfbGVmdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBsb29wKGZhbHNlKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgYXJyb3dfcmlnaHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgbG9vcCh0cnVlKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBjYXRjaHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuXHJcbiAgICAgICAgLy9Db250YWN0IGZvcm1cclxuICAgICAgICBzZW5kX2NvbnRhY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRhY3RfZm9ybSA9IFtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VjdGlvbi1mb3JtIGlucHV0W25hbWU9J25hbWUnXVwiKSxcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VjdGlvbi1mb3JtIGlucHV0W25hbWU9J2NvbXBhbnlfbmFtZSddXCIpLFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWN0aW9uLWZvcm0gaW5wdXRbbmFtZT0nZS1tYWlsJ11cIiksXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlY3Rpb24tZm9ybSBpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKSxcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VjdGlvbi1mb3JtIHRleHRhcmVhW25hbWU9J21lc3NhZ2UnXVwiKVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIHNlbmRNZXNzYWdlKC4uLmNvbnRhY3RfZm9ybSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBzZW5kX21lbnUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbGV0IG1lbnVfZm9ybSA9IFtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1mb3JtIGlucHV0W25hbWU9J25hbWUnXVwiKSxcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1mb3JtIGlucHV0W25hbWU9J2NvbXBhbnlfbmFtZSddXCIpLFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51LWZvcm0gaW5wdXRbbmFtZT0nZS1tYWlsJ11cIiksXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtZm9ybSBpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKSxcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1mb3JtIHRleHRhcmVhW25hbWU9J21lc3NhZ2UnXVwiKVxyXG4gICAgICAgICAgICBdXHJcblxyXG4gICAgICAgICAgICBzZW5kTWVzc2FnZSguLi5tZW51X2Zvcm0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIGNhdGNoe1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBjaGVja0ltYWdlc0xvYWRlZChpbWcsIHByZWxvYWRlcilcclxuICAgIH0sIDUwMCk7XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgcGFyYWxheClcclxufSkiXX0=
